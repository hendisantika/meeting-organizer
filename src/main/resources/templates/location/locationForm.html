<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta content="text/html ;charset=UTF-8" http-equiv="Content-Type"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title th:text="#{locationPage.addLocation.title}">Add Location - Meeting Organizer</title>
    <link href="/webjars/bootstrap/5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/css/style.css" rel="stylesheet" th:href="@{/css/style.css}"/>
</head>
<body>
<div th:replace="~{fragments/common :: navbar}"></div>

<div class="page-header-modern">
    <h1 th:if="${mode == 'add'}">üìç Add New Location</h1>
    <h1 th:if="${mode == 'edit'}">‚úèÔ∏è Edit Location</h1>
    <p th:if="${mode == 'add'}">Create a new meeting location</p>
    <p th:if="${mode == 'edit'}">Update location details</p>
</div>

<div class="modern-container">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <div class="modern-card">
                <div class="modern-card-header">
                    <h2 th:if="${mode == 'add'}">Location Details</h2>
                    <h2 th:if="${mode == 'edit'}">Edit Location Information</h2>
                    <p>Fill in the information below</p>
                </div>

                <!-- Error Messages -->
                <div class="alert-custom alert-danger-custom" style="margin-bottom: 1.5rem;" th:if="${NAME_TAKEN}">
                    <strong>‚ö†Ô∏è Name Taken:</strong>
                    <span th:text="#{locationPage.location.nameTaken}">This location name is already in use</span>
                </div>

                <form method="POST" th:object="${dto}">
                    <input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden"/>

                    <!-- Location Name -->
                    <div class="modern-form-group">
                        <label class="modern-form-label" for="name" th:text="#{locationPage.addLocation.name.label}">
                            Location Name
                        </label>
                        <input class="modern-form-control"
                               id="name"
                               placeholder="e.g., Conference Room A"
                               required
                               th:field="*{name}"
                               type="text"/>
                        <div class="alert-custom alert-danger-custom" style="margin-top: 0.5rem;"
                             th:if="${#fields.hasErrors('name')}">
                            <span th:errors="*{name}">Name error message</span>
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="modern-form-group">
                        <label class="modern-form-label" for="description"
                               th:text="#{locationPage.addLocation.description.label}">
                            Description
                        </label>
                        <textarea class="modern-form-control"
                                  id="description"
                                  placeholder="Describe the location, amenities, equipment, etc."
                                  required
                                  rows="4"
                                  th:field="*{description}"></textarea>
                        <div class="alert-custom alert-danger-custom" style="margin-top: 0.5rem;"
                             th:if="${#fields.hasErrors('description')}">
                            <span th:errors="*{description}">Description error message</span>
                        </div>
                    </div>

                    <!-- Max Members -->
                    <div class="modern-form-group">
                        <label class="modern-form-label" for="max-members"
                               th:text="#{locationPage.addLocation.maxMembers.label}">
                            Maximum Capacity
                        </label>
                        <input class="modern-form-control"
                               id="max-members"
                               max="300"
                               min="1"
                               placeholder="Enter maximum number of people (1-300)"
                               required
                               th:field="*{maxMembers}"
                               type="number"/>
                        <small style="color: var(--text-light); display: block; margin-top: 0.5rem;">
                            Maximum number of people this location can accommodate (1-300)
                        </small>
                        <div class="alert-custom alert-danger-custom" style="margin-top: 0.5rem;"
                             th:if="${#fields.hasErrors('maxMembers')}">
                            <span th:errors="*{maxMembers}">Max members error message</span>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="d-flex gap-3 justify-content-end mt-4">
                        <a class="btn btn-modern btn-modern-outline" th:href="@{/location/browse}">
                            Cancel
                        </a>
                        <a class="btn btn-modern btn-modern-outline"
                           th:href="@{/location/{id}/details(id=${locationId})}"
                           th:if="${mode == 'edit' and locationId != null}">
                            Back to Details
                        </a>
                        <button class="btn btn-modern btn-modern-primary" th:if="${mode == 'add'}"
                                th:text="#{button.add}" type="submit">
                            ‚ûï Add Location
                        </button>
                        <button class="btn btn-modern btn-modern-primary" th:if="${mode == 'edit'}"
                                th:text="#{button.saveChanges}" type="submit">
                            üíæ Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{fragments/common :: footer}"></div>
<div th:replace="~{fragments/common :: scripts}"></div>
<script src="../resources/static/location.js" th:src="@{/js/location.js}"></script>
</body>
</html>